import{ab as t,E as r,F as n,C as e,Q as o,L as i,ac as d,U as c}from"./framework-c74165a4.js";const l={},s=d('<h1 id="_02-动态给vue的data添加一个新的属性时会发生什么-怎样解决" tabindex="-1"><a class="header-anchor" href="#_02-动态给vue的data添加一个新的属性时会发生什么-怎样解决" aria-hidden="true">#</a> 02. 动态给vue的data添加一个新的属性时会发生什么？怎样解决？</h1><h2 id="逐字稿" tabindex="-1"><a class="header-anchor" href="#逐字稿" aria-hidden="true">#</a> 逐字稿</h2><h3 id="发生什么" tabindex="-1"><a class="header-anchor" href="#发生什么" aria-hidden="true">#</a> 发生什么</h3><ol><li>动态给vue的data添加一个新属性会造成：“数据更新，页面不更新”的现象。但这只是Vue2存在的问题。原因是vue2用的是Object.defineProperty()实现数据响应式的，而Vue3的响应式原理是porxy，劫持的是整个对象，所以不存在此问题。</li><li>Object.defineProperty()的工作原理是将遍历对象内的property转为getter/setter，劫持的不是对象本身。所以当我们给对象添加新属性时，无法触发事件属性的拦截。</li></ol><h3 id="解决" tabindex="-1"><a class="header-anchor" href="#解决" aria-hidden="true">#</a> 解决</h3><ol><li>通过Vue.set()构造函数方法给响应式对象添加一个property。这种方法适用于添加少量的新属性。</li><li>先创建一个新对象，通过Object.assign()，将原响应式对象和新对象合并，混入新属性。这种方法适用于添加大量的新属性。</li><li>还有就是通过$forceUpdate强制更新，但不推荐使用。</li></ol>',6),h={href:"http://fanyouf.gitee.io/interview/vue/21.html#%E7%AE%80%E7%89%88",target:"_blank",rel:"noopener noreferrer"},_=e("p",null,"(@王功道)",-1);function u(f,p){const a=c("ExternalLinkIcon");return r(),n("div",null,[s,e("p",null,[e("a",h,[o("原面试题"),i(a)])]),_])}const v=t(l,[["render",u],["__file","data中动态添加data后的变化.html.vue"]]);export{v as default};
