import{u as J,a as z,O as P,b as Y,d as V,e as Z,l as R,W as X,f as S}from"./app-46ee081b.js";import{r as g,h as L,c as $,A as _,W as ee,Y as te,o as ae,B as le,j as e,Z as A,w as se,a3 as ne,i as ce}from"./framework-c74165a4.js";const re="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";const M=()=>e(R,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));M.displayName="CloseIcon";const b=()=>e(R,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));b.displayName="HeadingIcon";const F=()=>e(R,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));F.displayName="HeartIcon";const D=()=>e(R,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));D.displayName="HistoryIcon";const Q=()=>e(R,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));Q.displayName="TitleIcon";const ie={},oe=300,j=5,ue={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},pe="search-pro-history-results",f=J(pe,[]),he=()=>({history:f,addHistory:a=>{f.value.length<j?f.value=[a,...f.value]:f.value=[a,...f.value.slice(0,j-1)]},removeHistory:a=>{f.value=[...f.value.slice(0,a),...f.value.slice(a+1)]}}),ve=g(re),de=L(()=>JSON.parse(X(ve.value))),I=(a,p)=>{const h=a.toLowerCase(),l=p.toLowerCase(),c=[];let s=0,u=0;const v=(t,d=!1)=>{let n="";u===0?n=t.length>20?`… ${t.slice(-20)}`:t:d?n=t.length+u>100?`${t.slice(0,100-u)}… `:t:n=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,n&&c.push(n),u+=n.length,d||(c.push(["strong",p]),u+=p.length,u>=100&&c.push(" …"))};let m=h.indexOf(l,s);if(m===-1)return null;for(;m>=0;){const t=m+l.length;if(v(a.slice(s,m)),s=t,u>100)break;m=h.indexOf(l,s)}return u<100&&v(a.slice(s),!0),c},q=a=>a.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),me=(a,p)=>{var h;const l={};for(const[c,s]of Object.entries(p)){const u=((h=p[c.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",v=`${u?`${u} > `:""}${s.title}`,m=I(s.title,a);m&&(l[v]=[...l[v]||[],{type:"title",path:c,display:m}]),s.customFields&&Object.entries(s.customFields).forEach(([t,d])=>{d.forEach(n=>{const r=I(n,a);r&&(l[v]=[...l[v]||[],{type:"custom",path:c,index:t,display:r}])})});for(const t of s.contents){const d=I(t.header,a);d&&(l[v]=[...l[v]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:d}]);for(const n of t.contents){const r=I(n,a);r&&(l[v]=[...l[v]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:r}])}}}return Object.keys(l).sort((c,s)=>q(l[c])-q(l[s])).map(c=>({title:c,contents:l[c]}))},He=a=>{const p=z(),h=g([]),l=L(()=>de.value[p.value]),c=S(s=>{h.value=s?me(s,l.value):[]},oe);return se([a,p],()=>{c(a.value)}),h};var ge=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:p}){const h=_(),l=ee(),c=z(),s=P(ue),{history:u,addHistory:v,removeHistory:m}=he(),t=te(a,"query"),d=He(t),n=g(0),r=g(0),O=g(),U=L(()=>d.value.length>0),k=L(()=>d.value[n.value]||null),N=()=>{n.value=n.value>0?n.value-1:d.value.length-1,r.value=k.value.contents.length-1},T=()=>{n.value=n.value<d.value.length-1?n.value+1:0,r.value=0},C=()=>{r.value<k.value.contents.length-1?r.value=r.value+1:T()},E=()=>{r.value>0?r.value=r.value-1:N()},B=i=>i.map(o=>ce(o)?o:e(o[0],o[1])),K=i=>{if(i.type==="custom"){const o=ie[i.index]||"$content",[y,W=""]=ne(o)?o[c.value].split("$content"):o.split("$content");return B([y,...i.display,W])}return B(i.display)},G=()=>{n.value=0,r.value=0,p("updateQuery",""),p("close")};return ae(()=>{Y("keydown",i=>{if(U.value){if(i.key==="ArrowUp")E();else if(i.key==="ArrowDown")C();else if(i.key==="Enter"){const o=k.value.contents[r.value];l.path!==o.path&&(v(o),h.push(o.path),G())}}}),V(O.value,{reserveScrollBarGap:!0})}),le(()=>{Z()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!U.value}],ref:O},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},s.value.history),u.value.map((i,o)=>e(A,{to:i.path,class:["search-pro-result-item",{active:r.value===o}],onClick:()=>{console.log("click"),G()}},()=>[e(D,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[i.type==="content"&&i.header?e("div",{class:"content-header"},i.header):null,e("div",K(i))]),e("button",{class:"search-pro-close-icon",onClick:y=>{y.preventDefault(),y.stopPropagation(),m(o)}},e(M))]))])):s.value.emptyHistory:U.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:i,contents:o},y)=>{const W=n.value===y;return e("li",{class:["search-pro-result-list-item",{active:W}]},[e("div",{class:"search-pro-result-title"},i||"Documentation"),o.map((H,x)=>{const w=W&&r.value===x;return e(A,{to:H.path,class:["search-pro-result-item",{active:w,"aria-selected":w}],onClick:()=>{v(H),G()}},()=>[H.type==="content"?null:e(H.type==="title"?Q:H.type==="heading"?b:F,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[H.type==="content"&&H.header?e("div",{class:"content-header"},H.header):null,e("div",K(H))])])})])})):s.value.emptyResult)}});export{ge as default};
